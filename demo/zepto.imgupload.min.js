!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e){},,function(t,e,i){"use strict";i(0),function(t){function e(e,i){var n=new FileReader,o=t("<img />"),a=void 0,l=void 0,p=void 0;n.readAsDataURL(e),n.onload=function(t){var n=e.name,s=e.size;s=(e.size/1e3).toFixed(2)+"k",p=t.target.result,o.attr("src",t.target.result),o.on("load",function(){o.appendTo(document.body).css("visibility","hidden"),a=o.width(),l=o.height(),o.remove(),i({base64:p,name:n,size:s,viewSize:a+" x "+l})})}}function i(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{uploadTipsDesc:"",multiple:!1,accept:"image/gif,image/jpeg,image/png,image/svg",callback:function(){}};this.uploadEle=e,this.isUpload=!1,this.opts=t.extend({},n,i),this.init()}t.extend(i.prototype,{init:function(){var i=this;console.log(this);var n=t('<input type="file" class="input-img-upload">');n.attr("accept",this.opts.accept).appendTo(this.uploadEle),this.opts.multiple?n.attr("multiple","multiple"):this.createUploadTips(),this.uploadEle.attr("data-type","img-upload"),this.uploadEle.on("click",function(e){if(!i.isUpload||i.opts.multiple){if(i.opts.multiple){if(!t(i.opts.imgContainer).length)return alert("多图上传必须指定图片容器！");t(i.opts.imgContainer).attr("data-type","img-upload")}n.get(0).click()}}),n.on("click",function(t){t.stopPropagation()}).on("change",function(){var o=n.get(0).files,a=[];for(var l in o)"length"!==l&&"item"!==l&&a.push(o[l]);t.each(a,function(t,e){if(-1===i.opts.accept.indexOf(e.type))return alert("请上传正确类型"),!1});var p=[];t.each(a,function(t,i){e(i,function(t){p.push(t)})});var s=setInterval(function(){p.length===o.length&&(clearInterval(s),i.isUpload=!0,console.log(p),i.opts.callback(p),t.each(p,function(t,e){i.createUploadContent(e.base64)}))},100)})},createUploadTips:function(){var e=t('<div class="upload-tips" />'),i=t('<i class="icon icon-add" />'),n=void 0;i.appendTo(e),this.opts.uploadTipsDesc&&(n=t('<div class="upload-tips-desc" />'),n.html(this.opts.uploadTipsDesc).appendTo(e)),e.appendTo(this.uploadEle)},createUploadContent:function(e){var i=t('<div class="upload-content" />'),n=t('<i class="icon icon-cancel" />'),o=this;this.uploadEle.find(".upload-tips").remove(),n.off(),n.appendTo(i).on("click",function(){o.removeUploadContent(this)}),i.css("background-image","url("+e+")").addClass(this.opts.multiple?"multiple":"single").appendTo(this.opts.multiple?this.opts.imgContainer:this.uploadEle),setTimeout(function(){i.addClass("in")},0)},removeUploadContent:function(e){var i=this;t(e).parent(".upload-content").removeClass("in"),setTimeout(function(){t(e).parent(".upload-content").remove(),i.isUpload=!1,!i.opts.multiple&&i.createUploadTips()},500)}}),t.fn.imgUpload=function(e){t(this).each(function(n,o){new i(t(o),e)})}}(Zepto)}]);